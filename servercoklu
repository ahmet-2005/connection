import socket

SERVER_IP = "10.242.45.23"
PORT = 9000

def main():
    print("\n--- Ã‡OKLU SÄ°MÃœLASYON KONTROL MERKEZÄ° ---")
    print("Ã–rnek komutlar:")
    print("  1 arm")
    print("  1 takeoff")
    print("  2 arm")
    print("  2 takeoff")
    print("  all arm")
    print("  q (Ã§Ä±kÄ±ÅŸ)\n")

    try:
        # ğŸ”— SERVER'A TEK BAÄLANTI
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((SERVER_IP, PORT))
        print("âœ… Server'a baÄŸlanÄ±ldÄ±")

        while True:
            cmd = input("Komut gir: ").strip().lower()

            if not cmd:
                continue

            if cmd == "q":
                s.sendall(b"EXIT")
                print("âŒ Ã‡Ä±kÄ±lÄ±yor")
                break

            # ğŸ‘‰ KOMUTU SERVER FORMATINA Ã‡EVÄ°R ("1 arm" â†’ "1-ARM")
            if " " in cmd:
                parts = cmd.split(" ", 1)
                drone_id = parts[0]
                command = parts[1].upper()
                formatted_cmd = f"{drone_id}-{command}"
            else:
                formatted_cmd = cmd.upper()
            
            print(f"ğŸ“¤ GÃ¶nderiliyor: {formatted_cmd}")
            s.sendall(formatted_cmd.encode("utf-8"))

    except Exception as e:
        print("âŒ BaÄŸlantÄ± hatasÄ±:", e)

    finally:
        if s:
            s.close()

if __name__ == "__main__":
    main()